# MCP JavaFX Demo Application

Демонстрационное приложение для тестирования возможностей MCP JavaFX Debug.

## Запуск

```bash
mvn javafx:run -pl mcp-javafx-demo
```

Или через IDE: запустить класс `DemoAppLauncher`.

### Запуск с профилем (Java Agent)

Для автоматического подключения агента без изменений в коде (используется `DemoApp` вместо `DemoAppLauncher`):

```bash
mvn initialize javafx:run -P agent -pl mcp-javafx-demo
```
Этот профиль автоматически находит JAR агента и подключает его через `-javaagent`.


## Функции приложения

### Простой UI (верхняя часть)

| Элемент | ID | Описание |
|---------|-----|----------|
| Label | `greeting` | Приветственный текст |
| TextField | `input` | Поле ввода имени. Submit по Enter или кнопке |
| Button | `submitBtn` | Отправка формы |

---

### Map Canvas (нижняя часть)

Холст с имитацией карты для тестирования zoom, pan и рисования.

#### Режимы работы

| Режим | Кнопка (ID) | Описание |
|-------|-------------|----------|
| **Pan** | `panModeBtn` | Перемещение холста перетаскиванием |
| **Add Point** | `pointModeBtn` | Добавление точек кликом |
| **Add Line** | `lineModeBtn` | Рисование многоступенчатой линии (polyline) |

> При отжатии кнопок Point/Line автоматически включается режим Pan.

#### Управление

| Действие | Как выполнить |
|----------|---------------|
| Панорамирование | Перетаскивание мышью (в режиме Pan) |
| Зум | Прокрутка колеса мыши (к позиции курсора) |
| Добавить точку | Клик (в режиме Add Point) |
| Добавить вершину линии | Клик (в режиме Add Line) |
| Сброс вида | Кнопка `resetViewBtn` |
| Очистить всё | Кнопка `clearAllBtn` |

#### UI элементы

| Элемент | ID | Описание |
|---------|-----|----------|
| Canvas | `mapCanvas` | Холст для рисования |
| Контейнер | `canvasContainer` | Pane с рамкой |
| Тулбар | `mapToolbar` | Панель инструментов |
| Zoom индикатор | `zoomLabel` | Текущий масштаб в % |
| Секция | `mapSection` | Вся секция карты |

## Визуальные элементы холста

- **Сетка** — адаптивная серая сетка
- **Точки** — красные круги (10px)
- **Polyline** — синяя ломаная линия с синими вершинами (8px)
- **Начало координат** — крестик в точке (0,0)

## Тестирование через MCP

Приложение запускается с включённым MCP Debug сервером. После запуска в консоли выводятся:

```
Endpoint: http://127.0.0.1:XXXXX
```

### Примеры MCP действий

```json
// Клик по кнопке
{"type": "click", "target": {"ref": {"uid": "submitBtn"}}}

// Ввод текста
{"type": "setText", "target": {"ref": {"uid": "input"}}, "text": "World"}

// Клик по координатам на холсте
{"type": "click", "x": 300, "y": 200, "target": {"ref": {"uid": "mapCanvas"}}}

// Скролл для зума
{"type": "scroll", "target": {"ref": {"uid": "mapCanvas"}}, "deltaY": 100}

// Drag для панорамирования
{"type": "drag", "from": {"x": 200, "y": 200}, "to": {"x": 300, "y": 250}}
```
